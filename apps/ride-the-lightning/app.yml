# SPDX-FileCopyrightText: Citadel and contributors
#
# SPDX-License-Identifier: AGPL-3.0-only

# yaml-language-server: $schema=../../app-standard-v1.json

version: 1

metadata:
  category: Lightning Node Management
  name: Ride The Lightning
  version: 0.11.2
  tagline: Manage lightning node operations better
  description: >-
    Haven't written a desription yet for this, sorry.
  developer: Shahana and Suheb
  website: https://github.com/Ride-The-Lightning/RTL
  dependencies:
  - lnd
  - bitcoind
  repo: https://github.com/Ride-The-Lightning/RTL
  support: https://twitter.com/RTL_App
  gallery:
  - 1.jpg
  - 2.jpg
  - 3.jpg
  defaultPassword: moneyprintergobrrr
  mainContainer: web

containers:
- image: shahanafarooqui/rtl:0.11.2@sha256:225b47abcca053e3ea831431742a08b3f3e70b12654df6fd703f617ad965f34e
  user: 1000:1000
  port: 3000
  environment:
    PORT: 3000
    RTL_CONFIG_PATH: /data
    CHANNEL_BACKUP_PATH: /data/backup
    LN_IMPLEMENTATION: LND
    LN_SERVER_URL: https://$LND_IP:$LND_REST_PORT
    MACAROON_PATH: /lnd/data/chain/bitcoin/$BITCOIN_NETWORK
    CONFIG_PATH: /lnd/lnd.conf
    SWAP_SERVER_URL: https://$APP_RIDE_THE_LIGHTNING_LOOP_IP:8081
    SWAP_MACAROON_PATH: /loop/.loop/$BITCOIN_NETWORK
  name: web
  data:
  - loop:/loop
  - rtl:/data
  permissions:
  - lnd
  - bitcoind

- image: ghcr.io/runcitadel/loop:v0.15.1-beta@sha256:c8e1d361442675a17a2ec3d7de8f5718db17c9b24e744cd6b89992f97befc904
  user: 1000:1000
  environment:
    HOME: /data
  command:
  - --network=$BITCOIN_NETWORK
  - --lnd.host="$LND_IP:$LND_GRPC_PORT"
  - --lnd.macaroonpath="/lnd/data/chain/bitcoin/$BITCOIN_NETWORK/admin.macaroon"
  - --lnd.tlspath="/lnd/tls.cert"
  - --restlisten=0.0.0.0:8081
  name: loop
  data:
  - loop:/data
  permissions:
  - lnd
